<div ng-include src="'template/identity/identity-navbar.html'"></div>

<div class="container" ng-controller="TripsController">
    <div class="col-md-9">
        <h3><a href="#/trips">< Back to trips</a></h3>
        <div class="img-rounded">
            <ui-gmap-google-map center='map.center' zoom='map.zoom' draggable='true' events='map.events'>
                <ui-gmap-marker ng-repeat="m in map.markers" coords="m.coords" icon="m.icon"
                                idkey="m.id"></ui-gmap-marker>
                <ui-gmap-polylines models="trackings" path="'geotracks'" static="true" fit="true"></ui-gmap-polylines>
            </ui-gmap-google-map>
        </div>
    </div>
    <div class="col-md-3">
        <h2>Trip {{focusedTrip}}</h2>
        <div class="list-group">

            <!-- Pictures -->
            <a href="" class="list-group-item active" ng-click="listPictures()">
                <h4 class="list-group-item-heading">Pictures</h4>
                <!--<p class="list-group-item-text">tekst</p>-->
            </a>
            <div class="list-group" ng-show="pictures">
                <a ng-repeat="pic in pictures" href="#" class="list-group-item inner-element">{{pic.name}}</a>
            </div>

            <!-- Videos -->
            <a href="#" class="list-group-item">
                <h4 class="list-group-item-heading">Videos</h4>
            </a>

            <!-- Waypoints -->
            <a href="" class="list-group-item" ng-click="listWaypoints()">
                <span class="badge">{{map.markers.length}}</span>
                <h4 class="list-group-item-heading">Waypoints <span ng-show="waypointsChanged"
                                                                    ng-click="saveChangedWaypoints()"
                                                                    class="glyphicon glyphicon-floppy-disk"
                                                                    aria-hidden="true"></span></h4>
            </a>
            <div class="list-group" ng-show="waypoints">
                <div ng-repeat="waypoint in waypoints" href="#" class="list-group-item inner-element">
                    <a href="" ng-click="removeWaypoint($index)"><span style="float: right; padding: 3px"
                                                                       class="glyphicon glyphicon-remove"></span></a>
                    <a ng-hide="$index == waypoints.length-1" href="" ng-click="moveWaypointDown($index)"><span
                            style="float: right; padding: 3px" class="glyphicon glyphicon-download"></span></a>
                    <a ng-hide="$index == 0" href="" ng-click="moveWaypointUp($index)"><span
                            style="float: right; padding: 3px" class="glyphicon glyphicon-upload"></span></a>
                    <div># {{$index + 1}}</div>
                    <div>City: {{waypoint.coords.city}}</div>
                    <div>Lat: {{waypoint.coords.latitude}}</div>
                    <div>Lon: {{waypoint.coords.longitude}}</div>
                </div>
            </div>
        </div>
    </div>
    <button ng-click="getMediaList()">Get media list</button>
</div>


<div class="container" ng-controller="PhotoController">
    <!--  -->
    <table>
        <td align="center">
            <h3>Add photo</h3>
            <form role="form" id="editForm" method="post" data-ng-submit="addPhoto(photoFile)">

                <div class="form-group">
                    <label for="photoFile">Route:</label>
                    <input type="file" class="file" id="photoFile" required ng-model="photoFile" accept=".png"
                           onchange="angular.element(this).scope().setFile(this)">
                    <span class="file-custom"></span>
                </div>

                <button type="submit" class="btn btn-default">Save</button>
            </form>
        </td>
    </table>
</div>

<div class="container" ng-controller="VideoController">
    <h3>Videos</h3>
    <a class="btn btn-default" role="button" data-toggle="modal" data-target="#deleteModal">Add video</a>

    <div class="modal fade" id="deleteModal" role="dialog">
        <div class="modal-dialog">

            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Add video</h4>
                </div>
                <div class="modal-body">
                    <form role="form" id="addVideoForm" method="post" ng-submit="addVideo(videoFile)">
                        <div class="form-group">
                            <label for="videoFile">Choose video file:</label>
                            <input type="file" class="file" id="videoFile" ng-model="photoFile" accept="video/mpeg"
                                   onchange="angular.element(this).scope().setFile(this)" required>
                            <span class="file-custom"></span>
                        </div>

                        <button type="submit" class="btn btn-default">Save</button>
                    </form>
                </div>
                <div class="modal-footer">
                </div>
            </div>

        </div>
    </div>
</div>